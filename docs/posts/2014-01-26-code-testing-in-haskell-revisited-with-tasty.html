<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Jan Stolarek - Code testing in Haskell revisited (with Tasty)</title>
        <link rel="stylesheet" href="../css/default.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../index.html">Jan Stolarek</a>
            </div>
            <nav>
                <a href="../projects.html">Projects</a>
                <a href="../publications.html">Publications</a>
                <a href="../personal.html">Personal</a>
                <a href="../blog.html">Blog</a>
            </nav>
        </header>

        <main role="main">
            <article>
    <section class="header">
        Posted on 26/01/2014
    </section>
    <section>
        <h1 id="code-testing-in-haskell-revisited-with-tasty">Code testing in Haskell revisited (with Tasty)</h1>
<p>About 1,5 year ago I wrote a post about <a href="../posts/2012-10-05-code-testing-in-haskell.html">code testing in Haskell</a>. Post was accompanied by <a href="https://github.com/jstolarek/haskell-testing-stub">haskell-testing-stub</a>: a small project showing how to organize tests <a href="../posts/2012-10-21-code-benchmarking-in-haskell.html">and benchmarks</a> in Haskell. I used <a href="http://hackage.haskell.org/package/test-framework">test-framework</a> package to gather tests written in different testing frameworks (<a href="http://hackage.haskell.org/package/QuickCheck">QuickCheck</a> and <a href="http://hackage.haskell.org/package/HUnit">HUnit</a> in my case) in a coherent suite. Test-framework might have been a good choice in 2012 but that might not be the case today. The major issue is that it has been abandoned by and was unmaintained for several months. Recently the project <a href="https://github.com/haskell/test-framework">has been taken up by the community</a> and received some updates but for now it looks like there won’t be any major development.</p>
<p>As a response to the test-framework package being unmaintained <a href="http://ro-che.info/">Roman Cheplyaka</a> has released <a href="http://hackage.haskell.org/package/tasty">tasty</a> (original announcement <a href="http://www.haskell.org/pipermail/haskell-cafe/2013-August/109565.html">here</a>). Since its release in August 2013 tasty has received packages supporting integration with QuickCheck, HUnit, SmallCheck, hspec as well as support for golden testing and few others. I decided to give tasty a try and use it in my haskell-testing-stub project. Tasty turned out to be almost a drop-in replacement for test-framework. I had to update cabal file (quite obviously), change imports to point to tasty rather than test-framework and replace usage of <code>[Test]</code> type with <code>TestTree</code>. The only problem I encountered was adapting tests from HUnit. It turns out that tasty-hunit package does not have a function that allows to use an existing suite of HUnit tests. That feature was present in test-framework-hunit as <code>hUnitTestToTests</code> function. I mailed Roman about this and his reply was that this was intentional as he does not “believe it adds anything useful to the API (i.e. the way to <em>write</em> code).” That’s not a big issue though as it was easy to adapt the missing function (although I think I’ll just put it in a separate package and release it so others don’t have to reinvent the wheel).</p>
<p>I admit that at this point I am not sure whether switching from test-framework to tasty is a good move. The fact that tasty is actively developed is a huge plus although test-framework has reached a mature state so perhaps active development is no longer of key importance. Also, test-framework still has more supporting libraries than tasty. Migrating them should be easy but up till now no one has done it. So I’m not arguing heavily for tasty. This is more like an experiment to see how it works.</p>

        <p><a href="../blog.html">Back</a></p>
    </section>
</article>

        </main>
    </body>
</html>
